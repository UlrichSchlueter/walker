package compare

import (
	"io/ioutil"
	"log"
	"strings"
)

func getJsonFromFile(filename string) []byte {
	//s := `{"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"deployment.kubernetes.io/revision":"1"},"creationTimestamp":"2022-03-17T08:12:01Z","generation":1,"labels":{"olm.deployment-spec-hash":"69ffc75d49","olm.owner":"hive-operator.v1.2.3552-133480f","olm.owner.kind":"ClusterServiceVersion","olm.owner.namespace":"hive","operators.coreos.com/hive-operator.hive":""},"managedFields":[{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:olm.deployment-spec-hash":{},"f:olm.owner":{},"f:olm.owner.kind":{},"f:olm.owner.namespace":{},"f:operators.coreos.com/hive-operator.hive":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"c18c5f00-f21b-49f5-a62f-61f6e4663b62\"}":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{},"f:strategy":{"f:type":{}},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:alm-examples":{},"f:capabilities":{},"f:categories":{},"f:certified":{},"f:containerImage":{},"f:createdAt":{},"f:description":{},"f:olm.operatorGroup":{},"f:olm.operatorNamespace":{},"f:olm.targetNamespaces":{},"f:operatorframework.io/properties":{},"f:operators.operatorframework.io/internal-objects":{},"f:repository":{},"f:support":{}},"f:labels":{".":{},"f:control-plane":{},"f:controller-tools.k8s.io":{}}},"f:spec":{"f:containers":{"k:{\"name\":\"hive-operator\"}":{".":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"CLI_CACHE_DIR\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"HIVE_OPERATOR_NS\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"OPERATOR_CONDITION_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":2112,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:httpGet":{".":{},"f:path":{},"f:port":{},"f:scheme":{}},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/var/cache/kubectl\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"kubectl-cache\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}}},"manager":"olm","operation":"Update","time":"2022-03-17T08:12:02Z"},{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updatedReplicas":{}}},"manager":"kube-controller-manager","operation":"Update","subresource":"status","time":"2022-03-17T08:12:28Z"}],"name":"hive-operator","namespace":"hive","ownerReferences":[{"apiVersion":"operators.coreos.com/v1alpha1","blockOwnerDeletion":false,"controller":false,"kind":"ClusterServiceVersion","name":"hive-operator.v1.2.3552-133480f","uid":"c18c5f00-f21b-49f5-a62f-61f6e4663b62"}],"resourceVersion":"254092","uid":"4a61acf6-9c85-4b87-8ada-ec434d54d58f"},"spec":{"progressDeadlineSeconds":600,"replicas":1,"revisionHistoryLimit":1,"selector":{"matchLabels":{"control-plane":"hive-operator","controller-tools.k8s.io":"1.0"}},"strategy":{"type":"Recreate"},"template":{"metadata":{"annotations":{"alm-examples":"[{\"apiVersion\":\"hive.openshift.io/v1\",\"kind\":\"HiveConfig\",\"metadata\":{\"name\":\"hive\"},\"spec\":{\"managedDomains\":[{\"aws\":{\"credentialsSecretRef\":{\"name\":\"my-route53-creds\"}},\"domains\":[\"my-base-domain.example.com\"]}]}}]","capabilities":"Seamless Upgrades","categories":"OpenShift Optional","certified":"false","containerImage":"quay.io/openshift-hive/hive:v1.2.3552-133480f","createdAt":"2022-03-14T11:12:03Z","description":"OpenShift cluster provisioning and management at scale.","olm.operatorGroup":"hive-og","olm.operatorNamespace":"hive","olm.targetNamespaces":"hive","operatorframework.io/properties":"{\"properties\":[{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hiveinternal.openshift.io\",\"kind\":\"FakeClusterInstall\",\"version\":\"v1alpha1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"DNSZone\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"ClusterImageSet\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"SelectorSyncSet\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"SyncSet\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"Checkpoint\",\"version\":\"v1\"}},{\"type\":\"olm.package\",\"value\":{\"packageName\":\"hive-operator\",\"version\":\"1.2.3552-133480f\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"ClusterRelocate\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"HiveConfig\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"MachinePoolNameLease\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"SelectorSyncIdentityProvider\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"ClusterClaim\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"ClusterDeployment\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"ClusterPool\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"MachinePool\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hiveinternal.openshift.io\",\"kind\":\"ClusterSyncLease\",\"version\":\"v1alpha1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"ClusterDeprovision\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"ClusterProvision\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"SyncIdentityProvider\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hive.openshift.io\",\"kind\":\"ClusterState\",\"version\":\"v1\"}},{\"type\":\"olm.gvk\",\"value\":{\"group\":\"hiveinternal.openshift.io\",\"kind\":\"ClusterSync\",\"version\":\"v1alpha1\"}}]}","operators.operatorframework.io/internal-objects":"[\"checkpoints.hive.openshift.io\",\"clusterdeprovisions.hive.openshift.io\",\"clusterprovisions.hive.openshift.io\",\"clusterstates.hive.openshift.io\",\"machinepoolnameleases.hive.openshift.io\",\"clustersyncleases.hiveinternal.openshift.io\",\"clustersyncs.hiveinternal.openshift.io\",\"fakeclusterinstalls.hiveinternal.openshift.io\"]","repository":"https://github.com/openshift/hive","support":"Hive Team"},"creationTimestamp":null,"labels":{"control-plane":"hive-operator","controller-tools.k8s.io":"1.0"}},"spec":{"containers":[{"command":["/opt/services/hive-operator","--log-level","info"],"env":[{"name":"CLI_CACHE_DIR","value":"/var/cache/kubectl"},{"name":"HIVE_OPERATOR_NS","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"OPERATOR_CONDITION_NAME","value":"hive-operator.v1.2.3552-133480f"}],"image":"quay.io/openshift-hive/hive:v1.2.3552-133480f","imagePullPolicy":"Always","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/healthz","port":8080,"scheme":"HTTP"},"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"name":"hive-operator","ports":[{"containerPort":2112,"name":"metrics","protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/readyz","port":8080,"scheme":"HTTP"},"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"resources":{"requests":{"cpu":"100m","memory":"256Mi"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/var/cache/kubectl","name":"kubectl-cache"}]}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"hive-operator","serviceAccountName":"hive-operator","terminationGracePeriodSeconds":10,"volumes":[{"emptyDir":{},"name":"kubectl-cache"}]}}},"status":{"availableReplicas":1,"conditions":[{"lastTransitionTime":"2022-03-17T08:12:28Z","lastUpdateTime":"2022-03-17T08:12:28Z","message":"Deployment has minimum availability.","reason":"MinimumReplicasAvailable","status":"True","type":"Available"},{"lastTransitionTime":"2022-03-17T08:12:01Z","lastUpdateTime":"2022-03-17T08:12:28Z","message":"ReplicaSet \"hive-operator-5968d7c8c6\" has successfully progressed.","reason":"NewReplicaSetAvailable","status":"True","type":"Progressing"}],"observedGeneration":1,"readyReplicas":1,"replicas":1,"updatedReplicas":1}}`
	dat, err := ioutil.ReadFile(filename)
	if err != nil {
		log.Panic(err)
	}
	return []byte(dat)
}

func getAllFilesFromFolder(folder string) (filePaths []string) {
	files, err := ioutil.ReadDir(folder)
	if err != nil {
		log.Fatal(err)
	}

	for _, file := range files {
		if !strings.HasSuffix(file.Name(), ".meta") {
			filePaths = append(filePaths, file.Name())
		}
	}
	return
}
